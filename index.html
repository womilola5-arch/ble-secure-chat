<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0e27">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>SecureLink - Bluetooth Chat</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: fixed;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      touch-action: pan-y;
    }

    #root {
      width: 100%;
      height: 100%;
    }

    /* Hide scrollbar but keep functionality */
    ::-webkit-scrollbar {
      width: 4px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
    }

    /* Prevent iOS bounce */
    #root {
      overflow: hidden;
      position: fixed;
    }

    /* Better mobile text input */
    input, textarea {
      font-size: 16px !important; /* Prevents iOS zoom */
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    // Bluetooth Configuration
    const BLUETOOTH_CONFIG = {
      SERVICE_UUID: '6e400001-b5a3-f393-e0a9-e50e24dcca9e',
      TX_CHAR_UUID: '6e400002-b5a3-f393-e0a9-e50e24dcca9e',
      RX_CHAR_UUID: '6e400003-b5a3-f393-e0a9-e50e24dcca9e',
    };

    const DEVICE_FILTERS = [
      { services: [BLUETOOTH_CONFIG.SERVICE_UUID] },
      { namePrefix: 'Nordic' },
      { namePrefix: 'ESP32' },
      { namePrefix: 'Arduino' },
      { namePrefix: 'SecureLink' },
    ];

    function App() {
      const [messages, setMessages] = useState([]);
      const [text, setText] = useState('');
      const [isConnected, setIsConnected] = useState(false);
      const [isScanning, setIsScanning] = useState(false);
      const [device, setDevice] = useState(null);
      const [connectionStrength, setConnectionStrength] = useState(0);
      const [typingIndicator, setTypingIndicator] = useState(false);
      const [deviceName, setDeviceName] = useState('');
      const [error, setError] = useState('');
      const [isMobile, setIsMobile] = useState(false);
      
      const messagesEndRef = useRef(null);
      const characteristicRef = useRef(null);
      const serverRef = useRef(null);
      const inputRef = useRef(null);

      useEffect(() => {
        // Detect mobile
        const checkMobile = () => {
          setIsMobile(window.innerWidth <= 768);
        };
        checkMobile();
        window.addEventListener('resize', checkMobile);
        return () => window.removeEventListener('resize', checkMobile);
      }, []);

      useEffect(() => {
        scrollToBottom();
      }, [messages]);

      useEffect(() => {
        if (!navigator.bluetooth) {
          setError('Web Bluetooth not available. Use Chrome, Edge, or Opera on Android/Desktop.');
        }
      }, []);

      useEffect(() => {
        const interval = setInterval(() => {
          if (isConnected) {
            setConnectionStrength(prev => {
              const change = (Math.random() - 0.5) * 10;
              return Math.max(60, Math.min(100, prev + change));
            });
          }
        }, 3000);
        return () => clearInterval(interval);
      }, [isConnected]);

      const scrollToBottom = () => {
        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      };

      const scanAndConnect = async () => {
        try {
          setIsScanning(true);
          setError('');

          const selectedDevice = await navigator.bluetooth.requestDevice({
            filters: DEVICE_FILTERS,
            optionalServices: [BLUETOOTH_CONFIG.SERVICE_UUID]
          });

          setDevice(selectedDevice);
          setDeviceName(selectedDevice.name || 'Unknown Device');

          const server = await selectedDevice.gatt.connect();
          serverRef.current = server;
          setIsConnected(true);
          
          addSystemMessage(`Connected to ${selectedDevice.name || 'device'}`);

          const service = await server.getPrimaryService(BLUETOOTH_CONFIG.SERVICE_UUID);
          const txCharacteristic = await service.getCharacteristic(BLUETOOTH_CONFIG.TX_CHAR_UUID);
          characteristicRef.current = txCharacteristic;

          const rxCharacteristic = await service.getCharacteristic(BLUETOOTH_CONFIG.RX_CHAR_UUID);
          await rxCharacteristic.startNotifications();
          rxCharacteristic.addEventListener('characteristicvaluechanged', handleIncomingMessage);

          selectedDevice.addEventListener('gattserverdisconnected', handleDisconnect);
          setConnectionStrength(85);

        } catch (err) {
          console.error('Bluetooth error:', err);
          setError(`Connection failed: ${err.message}`);
          setIsConnected(false);
        } finally {
          setIsScanning(false);
        }
      };

      const handleIncomingMessage = (event) => {
        const value = event.target.value;
        const decoder = new TextDecoder('utf-8');
        const messageText = decoder.decode(value);
        
        if (messageText.trim()) {
          setTypingIndicator(true);
          setTimeout(() => {
            setTypingIndicator(false);
            addMessage({
              id: Date.now().toString(),
              text: messageText.trim(),
              sender: 'peer',
              timestamp: new Date().toISOString(),
              status: 'delivered'
            });
          }, 300);
        }
      };

      const handleDisconnect = () => {
        setIsConnected(false);
        setConnectionStrength(0);
        characteristicRef.current = null;
        serverRef.current = null;
        addSystemMessage('Disconnected from device');
      };

      const disconnect = async () => {
        if (device && device.gatt.connected) {
          await device.gatt.disconnect();
        }
        handleDisconnect();
      };

      const sendMessage = async () => {
        if (!text.trim() || !characteristicRef.current) return;

        const messageToSend = text.trim();
        const tempId = Date.now().toString();

        try {
          const newMessage = {
            id: tempId,
            text: messageToSend,
            sender: 'me',
            timestamp: new Date().toISOString(),
            status: 'sending'
          };
          addMessage(newMessage);
          setText('');

          // Blur input on mobile after sending
          if (isMobile && inputRef.current) {
            inputRef.current.blur();
          }

          const encoder = new TextEncoder();
          const data = encoder.encode(messageToSend + '\n');
          
          await characteristicRef.current.writeValue(data);
          updateMessageStatus(tempId, 'sent');

        } catch (err) {
          console.error('Send error:', err);
          updateMessageStatus(tempId, 'failed');
          setError(`Failed to send: ${err.message}`);
        }
      };

      const addMessage = (newMsg) => {
        setMessages(prev => [...prev, newMsg]);
      };

      const addSystemMessage = (text) => {
        addMessage({
          id: Date.now().toString(),
          text,
          sender: 'system',
          timestamp: new Date().toISOString(),
          status: 'delivered'
        });
      };

      const updateMessageStatus = (messageId, status) => {
        setMessages(prev => 
          prev.map(msg => msg.id === messageId ? { ...msg, status } : msg)
        );
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      };

      const clearChat = () => {
        if (window.confirm('Clear all messages?')) {
          setMessages([]);
        }
      };

      const getResponsiveStyles = () => {
        if (isMobile) {
          return {
            header: { padding: '16px' },
            brandTitle: { fontSize: '18px' },
            messagesContainer: { padding: '16px' },
            emptyTitle: { fontSize: '22px' },
            setupGuide: { padding: '20px', maxWidth: '100%' },
            inputArea: { padding: '12px' },
            scanButton: { bottom: '16px', left: '16px', right: '16px', transform: 'none' },
          };
        }
        return {};
      };

      const responsiveStyles = getResponsiveStyles();

      return (
        <div style={styles.appContainer}>
          {/* Animated Background */}
          <div style={styles.background}>
            <div style={{...styles.gradientOrb, ...styles.orb1}}></div>
            <div style={{...styles.gradientOrb, ...styles.orb2}}></div>
            <div style={{...styles.gradientOrb, ...styles.orb3}}></div>
            <div style={styles.meshGradient}></div>
          </div>

          {/* Main Container */}
          <div style={styles.mainContainer}>
            
            {/* Header */}
            <header style={{...styles.header, ...responsiveStyles.header}}>
              <div style={styles.headerContent}>
                <div style={styles.brandSection}>
                  <div style={isMobile ? {...styles.logoContainer, width: '40px', height: '40px'} : styles.logoContainer}>
                    <svg style={isMobile ? {...styles.logoIcon, width: '24px', height: '24px'} : styles.logoIcon} viewBox="0 0 24 24" fill="none">
                      <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      <path d="M2 17L12 22L22 17" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      <path d="M2 12L12 17L22 12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                  </div>
                  <div style={styles.brandInfo}>
                    <h1 style={{...styles.brandTitle, ...responsiveStyles.brandTitle}}>{deviceName || 'SecureLink'}</h1>
                    <div style={styles.statusLine}>
                      <div style={{...styles.statusIndicator, ...(isConnected ? styles.connected : styles.disconnected)}}>
                        {isConnected && <div style={styles.statusPulse}></div>}
                      </div>
                      <span style={isMobile ? {...styles.statusText, fontSize: '11px'} : styles.statusText}>
                        {isConnected ? (isMobile ? 'Connected' : 'Encrypted Connection Active') : (isMobile ? 'Disconnected' : 'Awaiting Connection')}
                      </span>
                    </div>
                  </div>
                </div>

                <div style={styles.headerActions}>
                  {isConnected && !isMobile && (
                    <div style={styles.signalMeter}>
                      <div style={styles.signalBars}>
                        {[...Array(4)].map((_, i) => (
                          <div 
                            key={i} 
                            style={{
                              ...styles.signalBar,
                              height: `${(i + 1) * 25}%`,
                              ...(connectionStrength > (i + 1) * 25 ? styles.signalBarActive : {})
                            }}
                          />
                        ))}
                      </div>
                      <span style={styles.signalValue}>{Math.round(connectionStrength)}%</span>
                    </div>
                  )}
                  {isConnected && (
                    <button onClick={disconnect} style={isMobile ? {...styles.iconButton, width: '36px', height: '36px'} : styles.iconButton} title="Disconnect">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" style={{width: isMobile ? '18px' : '20px', height: isMobile ? '18px' : '20px'}}>
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                    </button>
                  )}
                  <button onClick={clearChat} style={isMobile ? {...styles.iconButton, width: '36px', height: '36px'} : styles.iconButton} title="Clear Chat">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" style={{width: isMobile ? '18px' : '20px', height: isMobile ? '18px' : '20px'}}>
                      <polyline points="3 6 5 6 21 6"></polyline>
                      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </header>

            {/* Error Banner */}
            {error && (
              <div style={styles.errorBanner}>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" style={{width: '20px', height: '20px', flexShrink: 0}}>
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="8" x2="12" y2="12"></line>
                  <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                <span style={{flex: 1, fontSize: isMobile ? '13px' : '14px'}}>{error}</span>
                <button onClick={() => setError('')} style={styles.errorClose}>×</button>
              </div>
            )}

            {/* Messages Area */}
            <div style={{...styles.messagesContainer, ...responsiveStyles.messagesContainer}}>
              {messages.length === 0 ? (
                <div style={styles.emptyState}>
                  <div style={styles.emptyIconContainer}>
                    <svg style={isMobile ? {...styles.emptyIcon, width: '60px', height: '60px'} : styles.emptyIcon} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                  </div>
                  <h2 style={{...styles.emptyTitle, ...responsiveStyles.emptyTitle}}>Secure Communication Ready</h2>
                  <p style={isMobile ? {...styles.emptySubtitle, fontSize: '14px', marginBottom: '30px'} : styles.emptySubtitle}>
                    {isConnected 
                      ? 'Your connection is encrypted end-to-end. Start messaging.' 
                      : 'Connect to a Bluetooth device to begin'}
                  </p>
                  
                  {!isConnected && (
                    <div style={{...styles.setupGuide, ...responsiveStyles.setupGuide}}>
                      <h3 style={{fontSize: isMobile ? '16px' : '18px', marginBottom: '20px', color: 'white'}}>Quick Start Guide</h3>
                      <div style={styles.guideSteps}>
                        <div style={styles.guideStep}>
                          <div style={styles.stepNumber}>1</div>
                          <div style={styles.stepContent}>
                            <strong>Enable Bluetooth</strong>
                            <span>Supports Nordic UART Service</span>
                          </div>
                        </div>
                        <div style={styles.guideStep}>
                          <div style={styles.stepNumber}>2</div>
                          <div style={styles.stepContent}>
                            <strong>Scan for Devices</strong>
                            <span>Tap button below to discover</span>
                          </div>
                        </div>
                        <div style={styles.guideStep}>
                          <div style={styles.stepNumber}>3</div>
                          <div style={styles.stepContent}>
                            <strong>Connect & Chat</strong>
                            <span>Select device and start messaging</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  )}
                </div>
              ) : (
                <div style={styles.messagesList}>
                  {messages.map((msg, index) => {
                    const isMe = msg.sender === 'me';
                    const isSystem = msg.sender === 'system';

                    if (isSystem) {
                      return (
                        <div key={msg.id} style={styles.systemMessage}>
                          <div style={styles.systemDivider}></div>
                          <span style={styles.systemText}>{msg.text}</span>
                          <div style={styles.systemDivider}></div>
                        </div>
                      );
                    }

                    return (
                      <div key={msg.id} style={styles.messageWrapper}>
                        <div style={{
                          ...styles.message, 
                          ...(isMe ? styles.messageSent : styles.messageReceived),
                          maxWidth: isMobile ? '85%' : '70%'
                        }}>
                          <div style={isMe ? styles.messageContentSent : styles.messageContentReceived}>
                            <p style={styles.messageText}>{msg.text}</p>
                            <div style={styles.messageMeta}>
                              <span style={styles.messageTime}>
                                {new Date(msg.timestamp).toLocaleTimeString([], { 
                                  hour: '2-digit', 
                                  minute: '2-digit' 
                                })}
                              </span>
                              {isMe && (
                                <span style={styles.messageStatus}>
                                  {msg.status === 'sent' && '✓✓'}
                                  {msg.status === 'sending' && '○'}
                                  {msg.status === 'failed' && '✕'}
                                </span>
                              )}
                            </div>
                          </div>
                        </div>
                      </div>
                    );
                  })}
                  <div ref={messagesEndRef} />
                </div>
              )}

              {typingIndicator && (
                <div style={styles.typingIndicator}>
                  <div style={styles.typingBubble}>
                    <span style={{...styles.typingDot, animationDelay: '0s'}}>●</span>
                    <span style={{...styles.typingDot, animationDelay: '0.2s'}}>●</span>
                    <span style={{...styles.typingDot, animationDelay: '0.4s'}}>●</span>
                  </div>
                  <span style={styles.typingLabel}>Typing...</span>
                </div>
              )}
            </div>

            {/* Input Area */}
            <div style={{...styles.inputArea, ...responsiveStyles.inputArea}}>
              <div style={styles.inputContainer}>
                <textarea
                  ref={inputRef}
                  value={text}
                  onChange={(e) => setText(e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder={isConnected ? "Type a message..." : "Connect to start"}
                  style={{...styles.messageInput, fontSize: '16px'}}
                  rows={1}
                  maxLength={500}
                  disabled={!isConnected}
                />
                <button
                  onClick={sendMessage}
                  disabled={!text.trim() || !isConnected}
                  style={{
                    ...styles.sendButton,
                    ...(isMobile ? {width: '44px', height: '44px'} : {}),
                    ...(!text.trim() || !isConnected ? {opacity: 0.4, cursor: 'not-allowed'} : {})
                  }}
                >
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" style={{width: '20px', height: '20px'}}>
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                  </svg>
                </button>
              </div>
              {text.length > 0 && (
                <div style={styles.charCounter}>{text.length} / 500</div>
              )}
            </div>

            {/* Scan Button */}
            {!isConnected && (
              <button 
                onClick={scanAndConnect} 
                style={{...styles.scanButton, ...responsiveStyles.scanButton}}
                disabled={isScanning}
              >
                {isScanning ? (
                  <>
                    <div style={styles.scanningSpinner}></div>
                    <span>{isMobile ? 'Scanning...' : 'Scanning for devices...'}</span>
                  </>
                ) : (
                  <>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" style={{width: '24px', height: '24px'}}>
                      <path d="M12 2v20M17 7l-5 5-5-5M17 17l-5-5-5 5"></path>
                      <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <span>{isMobile ? 'Scan Devices' : 'Scan for Bluetooth Devices'}</span>
                  </>
                )}
              </button>
            )}
          </div>

          <style>{keyframes}</style>
        </div>
      );
    }

    // Keyframe animations
    const keyframes = `
      @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(2); opacity: 0; }
      }
      @keyframes float {
        0%, 100% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(50px, -50px) scale(1.05); }
        66% { transform: translate(-50px, 50px) scale(0.95); }
      }
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      @keyframes typing {
        0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
        30% { transform: translateY(-10px); opacity: 1; }
      }
    `;

    // Styles object
    const styles = {
      appContainer: {
        position: 'relative',
        width: '100%',
        height: '100%',
        overflow: 'hidden',
        fontFamily: "'Space Grotesk', -apple-system, sans-serif",
      },
      background: {
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        background: 'linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1428 100%)',
        overflow: 'hidden',
        zIndex: 0,
      },
      gradientOrb: {
        position: 'absolute',
        borderRadius: '50%',
        filter: 'blur(80px)',
        opacity: 0.35,
        animation: 'float 20s infinite ease-in-out',
      },
      orb1: {
        width: '400px',
        height: '400px',
        background: 'radial-gradient(circle, #4f46e5 0%, transparent 70%)',
        top: '-150px',
        left: '-150px',
        animationDelay: '0s',
      },
      orb2: {
        width: '350px',
        height: '350px',
        background: 'radial-gradient(circle, #7c3aed 0%, transparent 70%)',
        bottom: '-100px',
        right: '-100px',
        animationDelay: '-7s',
      },
      orb3: {
        width: '300px',
        height: '300px',
        background: 'radial-gradient(circle, #2563eb 0%, transparent 70%)',
        top: '50%',
        left: '50%',
        transform: 'translate(-50%, -50%)',
        animationDelay: '-14s',
      },
      meshGradient: {
        position: 'absolute',
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        backgroundImage: `radial-gradient(at 20% 30%, rgba(79, 70, 229, 0.12) 0px, transparent 50%),
          radial-gradient(at 80% 70%, rgba(124, 58, 237, 0.12) 0px, transparent 50%),
          radial-gradient(at 50% 50%, rgba(37, 99, 235, 0.08) 0px, transparent 50%)`,
      },
      mainContainer: {
        position: 'relative',
        width: '100%',
        maxWidth: '1200px',
        height: '100%',
        margin: '0 auto',
        display: 'flex',
        flexDirection: 'column',
        zIndex: 1,
        backdropFilter: 'blur(10px)',
        background: 'rgba(255, 255, 255, 0.02)',
      },
      header: {
        background: 'rgba(15, 20, 40, 0.9)',
        backdropFilter: 'blur(20px) saturate(180%)',
        borderBottom: '1px solid rgba(255, 255, 255, 0.1)',
        padding: '20px 32px',
        boxShadow: '0 4px 24px rgba(0, 0, 0, 0.3)',
      },
      headerContent: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
      },
      brandSection: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
      },
      logoContainer: {
        width: '48px',
        height: '48px',
        background: 'linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)',
        borderRadius: '12px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        boxShadow: '0 8px 24px rgba(79, 70, 229, 0.4)',
      },
      logoIcon: {
        width: '28px',
        height: '28px',
        color: 'white',
      },
      brandInfo: {
        display: 'flex',
        flexDirection: 'column',
        gap: '4px',
      },
      brandTitle: {
        fontSize: '24px',
        fontWeight: 700,
        color: 'white',
        letterSpacing: '-0.5px',
      },
      statusLine: {
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
      },
      statusIndicator: {
        position: 'relative',
        width: '8px',
        height: '8px',
        borderRadius: '50%',
      },
      connected: {
        background: '#10b981',
        boxShadow: '0 0 12px rgba(16, 185, 129, 0.6)',
      },
      disconnected: {
        background: '#ef4444',
      },
      statusPulse: {
        position: 'absolute',
        top: '-4px',
        left: '-4px',
        width: '16px',
        height: '16px',
        borderRadius: '50%',
        background: 'rgba(16, 185, 129, 0.4)',
        animation: 'pulse 2s infinite',
      },
      statusText: {
        fontSize: '13px',
        color: 'rgba(255, 255, 255, 0.7)',
        fontWeight: 500,
      },
      headerActions: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
      },
      signalMeter: {
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
        padding: '8px 12px',
        background: 'rgba(255, 255, 255, 0.05)',
        borderRadius: '8px',
        border: '1px solid rgba(255, 255, 255, 0.1)',
      },
      signalBars: {
        display: 'flex',
        alignItems: 'flex-end',
        gap: '2px',
        height: '16px',
      },
      signalBar: {
        width: '3px',
        background: 'rgba(255, 255, 255, 0.2)',
        borderRadius: '2px',
        transition: 'all 0.3s ease',
      },
      signalBarActive: {
        background: 'linear-gradient(to top, #10b981, #34d399)',
      },
      signalValue: {
        fontSize: '12px',
        fontWeight: 600,
        color: 'rgba(255, 255, 255, 0.9)',
        fontFamily: "'JetBrains Mono', monospace",
      },
      iconButton: {
        minWidth: '40px',
        minHeight: '40px',
        border: 'none',
        background: 'rgba(255, 255, 255, 0.05)',
        borderRadius: '10px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        transition: 'all 0.2s ease',
        border: '1px solid rgba(255, 255, 255, 0.1)',
        color: 'rgba(255, 255, 255, 0.9)',
        WebkitTapHighlightColor: 'transparent',
      },
      errorBanner: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        background: 'rgba(239, 68, 68, 0.1)',
        border: '1px solid rgba(239, 68, 68, 0.3)',
        padding: '12px 16px',
        color: '#fca5a5',
        fontSize: '14px',
      },
      errorClose: {
        background: 'none',
        border: 'none',
        color: '#fca5a5',
        fontSize: '24px',
        cursor: 'pointer',
        padding: '0 8px',
        opacity: 0.7,
        WebkitTapHighlightColor: 'transparent',
      },
      messagesContainer: {
        flex: 1,
        overflowY: 'auto',
        padding: '32px',
        position: 'relative',
        WebkitOverflowScrolling: 'touch',
      },
      emptyState: {
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        height: '100%',
        textAlign: 'center',
        padding: '20px',
      },
      emptyIconContainer: {
        position: 'relative',
        marginBottom: '24px',
      },
      emptyIcon: {
        width: '80px',
        height: '80px',
        color: 'rgba(255, 255, 255, 0.3)',
      },
      emptyTitle: {
        fontSize: '28px',
        fontWeight: 700,
        color: 'white',
        marginBottom: '12px',
        letterSpacing: '-0.5px',
      },
      emptySubtitle: {
        fontSize: '16px',
        color: 'rgba(255, 255, 255, 0.6)',
        maxWidth: '400px',
        lineHeight: 1.6,
        marginBottom: '40px',
      },
      setupGuide: {
        background: 'rgba(255, 255, 255, 0.03)',
        border: '1px solid rgba(255, 255, 255, 0.1)',
        borderRadius: '16px',
        padding: '32px',
        maxWidth: '600px',
        textAlign: 'left',
        backdropFilter: 'blur(10px)',
        width: '100%',
      },
      guideSteps: {
        display: 'flex',
        flexDirection: 'column',
        gap: '16px',
      },
      guideStep: {
        display: 'flex',
        gap: '16px',
        alignItems: 'flex-start',
      },
      stepNumber: {
        width: '32px',
        height: '32px',
        background: 'linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)',
        borderRadius: '8px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        color: 'white',
        fontWeight: 700,
        fontSize: '14px',
        flexShrink: 0,
      },
      stepContent: {
        display: 'flex',
        flexDirection: 'column',
        gap: '4px',
        color: 'white',
        fontSize: '14px',
      },
      messagesList: {
        display: 'flex',
        flexDirection: 'column',
        gap: '12px',
      },
      messageWrapper: {
        marginBottom: '4px',
      },
      systemMessage: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        margin: '12px 0',
      },
      systemDivider: {
        flex: 1,
        height: '1px',
        background: 'linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), transparent)',
      },
      systemText: {
        color: 'rgba(255, 255, 255, 0.5)',
        fontSize: '12px',
        fontWeight: 500,
        padding: '4px 10px',
        background: 'rgba(255, 255, 255, 0.03)',
        borderRadius: '10px',
        whiteSpace: 'nowrap',
      },
      message: {
        display: 'flex',
      },
      messageSent: {
        marginLeft: 'auto',
      },
      messageReceived: {
        marginRight: 'auto',
      },
      messageContentSent: {
        background: 'linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)',
        padding: '10px 14px',
        borderRadius: '16px',
        borderBottomRightRadius: '4px',
        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',
      },
      messageContentReceived: {
        background: 'rgba(255, 255, 255, 0.05)',
        border: '1px solid rgba(255, 255, 255, 0.1)',
        padding: '10px 14px',
        borderRadius: '16px',
        borderBottomLeftRadius: '4px',
        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',
      },
      messageText: {
        color: 'white',
        fontSize: '15px',
        lineHeight: 1.4,
        marginBottom: '4px',
        wordWrap: 'break-word',
      },
      messageMeta: {
        display: 'flex',
        alignItems: 'center',
        gap: '6px',
        justifyContent: 'flex-end',
      },
      messageTime: {
        fontSize: '10px',
        color: 'rgba(255, 255, 255, 0.6)',
        fontFamily: "'JetBrains Mono', monospace",
      },
      messageStatus: {
        fontSize: '11px',
        color: 'rgba(255, 255, 255, 0.8)',
      },
      typingIndicator: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        marginTop: '12px',
      },
      typingBubble: {
        display: 'flex',
        gap: '4px',
        padding: '10px 14px',
        background: 'rgba(255, 255, 255, 0.05)',
        border: '1px solid rgba(255, 255, 255, 0.1)',
        borderRadius: '16px',
        borderBottomLeftRadius: '4px',
      },
      typingDot: {
        fontSize: '12px',
        color: 'rgba(255, 255, 255, 0.6)',
        animation: 'typing 1.4s infinite',
      },
      typingLabel: {
        fontSize: '12px',
        color: 'rgba(255, 255, 255, 0.5)',
        fontStyle: 'italic',
      },
      inputArea: {
        padding: '16px',
        background: 'rgba(15, 20, 40, 0.9)',
        backdropFilter: 'blur(20px) saturate(180%)',
        borderTop: '1px solid rgba(255, 255, 255, 0.1)',
      },
      inputContainer: {
        display: 'flex',
        gap: '10px',
        alignItems: 'flex-end',
      },
      messageInput: {
        flex: 1,
        background: 'rgba(255, 255, 255, 0.05)',
        border: '1px solid rgba(255, 255, 255, 0.1)',
        borderRadius: '12px',
        padding: '12px 14px',
        color: 'white',
        fontSize: '15px',
        fontFamily: 'inherit',
        resize: 'none',
        outline: 'none',
        transition: 'all 0.3s ease',
        maxHeight: '100px',
      },
      sendButton: {
        width: '48px',
        height: '48px',
        background: 'linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)',
        border: 'none',
        borderRadius: '12px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        transition: 'all 0.2s ease',
        boxShadow: '0 4px 12px rgba(79, 70, 229, 0.4)',
        color: 'white',
        WebkitTapHighlightColor: 'transparent',
      },
      charCounter: {
        fontSize: '11px',
        color: 'rgba(255, 255, 255, 0.4)',
        textAlign: 'right',
        marginTop: '6px',
        fontFamily: "'JetBrains Mono', monospace",
      },
      scanButton: {
        position: 'fixed',
        bottom: '24px',
        left: '50%',
        transform: 'translateX(-50%)',
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        padding: '14px 28px',
        background: 'linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)',
        border: 'none',
        borderRadius: '12px',
        color: 'white',
        fontSize: '15px',
        fontWeight: 600,
        cursor: 'pointer',
        boxShadow: '0 8px 24px rgba(79, 70, 229, 0.5)',
        transition: 'all 0.2s ease',
        zIndex: 10,
        WebkitTapHighlightColor: 'transparent',
      },
      scanningSpinner: {
        width: '20px',
        height: '20px',
        border: '3px solid rgba(255, 255, 255, 0.3)',
        borderTopColor: 'white',
        borderRadius: '50%',
        animation: 'spin 1s linear infinite',
      },
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
